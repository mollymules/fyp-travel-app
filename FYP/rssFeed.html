<!DOCTYPE HTML>
<html manifest="mobile/offline.appcache"> 
<head>
	<title>Local News</title>
		<meta name="viewport" content="user-scalable=no, width=device-width height=device-height" /> 
		<link rel="stylesheet" href="mobile/jquery.mobile-1.0.1.min.css" />
		<script type="text/javascript" src="mobile/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="mobile/jquery.mobile-1.0.1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="stylesheet/main.css" />
</head>

<body>

	<div data-role="page" id="rssPage" >
		<script type="text/javascript">
		$("#rssPage").live('pageshow', function() {
			$('a').live('click', function(event) {
				var selected = event.target.id;
				localStorage.setItem("storyChoice",selected);
			});
		});
			$("#rssPage").bind('pageinit', function() {
				if (navigator.onLine){
					var loc = localStorage.getItem('location');
					$.get("http://pipes.yahoo.com/pipes/pipe.run?_id=bcad4e134d27cce68c67baf7750c07b3&_render=json", function(data) {
	    				localStorage.setItem("rss",JSON.stringify(data));
						var rssContainer = $('<ul data-role="listview">');
						for (i=0;i<data.count;i++) {
	    					rssContainer.append('<li style=" font-size: 10px;"><a href="/article" id='+i+'>'+ data.value.items[i].title +'</a></li>');
	    				}	
						rssContainer.append('</ul>');
						$("#rssList").append(rssContainer).trigger("create");
						
					});
				}
				else{
					$("<div class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'>"+
					"<h1>An internet connection is needed for this feature.</h1></div>")
					.css({ "display": "block", "opacity": 0.96, "top": $(window).scrollTop() + 100 })
					.appendTo( $.mobile.pageContainer ).delay( 4000 ).fadeOut( 1000, function(){
						$(this).remove();
					});
				}
			});
			
		</script>
		

		<div data-role="header">
			<h4>Health News</h4>
			<div class="ui-btn-left">
				<a href="/">
					<img src="images/3Strata_Icon.png" style="height:2em; width:2em;"/>
				</a>
			</div>
		</div>
		
		<div data-role="content">
			<div id="rssList"></div>
		</div>
		
		<div data-role="footer" data-position="fixed">
		<h4></h4>
		</div>
		
	</div>
</body>
</html>